<div class="filters-container">
    <div class="filter-wrapper">
        <!-- FILTRO -->
        <div class="filter-item flex-filter">
            <div outside-click="ctrl.onBlur()" class="btn-group"
                 data-ng-class="{open: ctrl.open && !ctrl.isDisabled}"
            >
                <button type="button" class="btn btn-filter filter-head" data-ng-click="ctrl.toggleFilter()"><span
                        style="color:darkgrey">{{ctrl.selectedCount}}</span>
                </button>
                <button type="button" class="btn btn-filter dropdown-toggle dropdown-toggle-split"
                        data-ng-click="ctrl.toggleFilter()">
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu filter-body">
                    <div class="col-xs-12 hidden-lg-up">
                        <a type="button" class="close col-xs-2 text-right no-padding" aria-label="Close"
                           ng-click="ctrl.toggleFilter()">
                            <span aria-hidden="true" class="fa fa-close"></span>
                        </a>
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="search" ng-disabled="ctrl.isDisabled"
                               placeholder="{{'app.common.description' | translate }}"
                               ng-model="ctrl.query" value="">
                    </div>
                    <div class="filter-scroll">
                        <ul class="list-unstyled filter-container"
                            ng-style="{height:(ctrl.window.innerHeight-200)+'px'}">
                            <li ng-repeat="item in ctrl.datasource | filter:ctrl.query">
                                <label class="c-input c-checkbox">
                                    <input type="checkbox"
                                           value={{item.id}}
                                           ng-disabled="ctrl.isDisabled"
                                           ng-model="item.isChecked"/>
                                    <span class="c-indicator"></span>{{item.description}}
                                </label>
                            </li>
                        </ul>
                        <div class="filter-btn">
                            <div class="btn bps-btn-primary" ng-click="ctrl.addFilter()">{{'app.button.ok' |
                                translate}}
                            </div>
                            <div class="btn bps-btn-secondary" data-ng-click="ctrl.toggleFilter()">{{'app.button.close'
                                | translate}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br/>
    <!-- RIEPILOGO -->
    <div class="filter-list">
        <!-- I FILTRI VERI E PROPRI -->
        <div ng-repeat="(fKey, fValue) in ctrl.selections">
            <span class="label bps-filter-label" ng-repeat="(key, value) in fValue"
                  style="margin-bottom:1rem;">
                <span class="filterlisttag ">
                    <span>{{value.description}}</span>
                    <span><i ng-show="!ctrl.isDisabled" ng-click="!ctrl.isDisabled && ctrl.removeFilter(fKey, value)"
                             style="cursor: pointer" class="fa fa-close"></i>
                    </span>
                </span>
            </span>
        </div>
    </div>

</div>