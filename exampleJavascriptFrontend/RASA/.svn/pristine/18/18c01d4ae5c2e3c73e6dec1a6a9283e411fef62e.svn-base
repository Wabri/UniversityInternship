(function() {
  'use strict';

  angular
    .module(APP_NAME)
    .service('CookiesService', CookiesService);

  /* @ngInject */
  function CookiesService() {

    var self = this;

    // config di base
    var config = {
      timeoutDays: 1,
      checkName: 'checkCookie',
      checkValue: 'test'
    };

    // i metodi del servizio
    self.enabled = enabled;
    self.set = set;
    self.get = get;
    self.remove = remove;
    self.removeAll = removeAll;

    /**
     * check
     * @returns {boolean}
     */
    function enabled() {

      // prima di tutto test dei cookie
      set(config.checkName, config.checkValue);

      // non lo trovo ???
      if (get(config.checkName) === undefined) {
        return false;
      } else {
        // lo rimuovo
        remove(config.checkName);
        // ok
        return true;
      }
    }

    /**
     * get
     */
    function get(name) {
      return Cookies.get(name);
    }

    /**
     * set
     */
    function set(name, value, timeout) {

      if (timeout === undefined)
        timeout = config.timeoutDays;

      return Cookies.set(name, value, {
        expires: timeout
      });
    }

    /**
     * remove
     * @param name
     */
    function remove(name) {
      return Cookies.remove(name);
    }

    /**
     * removeAll
     */
    function removeAll() {
      angular.forEach(Cookies, function(cookie, index) {

      });
    }
  }

})();
