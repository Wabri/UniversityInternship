(function () {
    'use strict';

    angular.module('revux').directive('trimBlur', trimBlur);

    function trimBlur() {

        var directive = {
            restrict: 'A',
            link: link,
            require: '^ngModel'
        };

        return directive;
    }


    function link(scope, element, attr, ngModel) {

        element.on('blur', function trimParser() {

            setTimeout(function () {
                scope.$apply(function () {
                    var value = ngModel.$modelValue;
                    if (value != undefined) {
                        value = value.replace(/\s{1,}$|^\s{1,}/g, "");
                        ngModel.$setViewValue(value);
                        ngModel.$render();
                    }
                });
            })
        });
    };

}());
