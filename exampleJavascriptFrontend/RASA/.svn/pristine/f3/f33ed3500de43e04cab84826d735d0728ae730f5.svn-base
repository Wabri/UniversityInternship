(function () {
    'use strict';
    angular.module('revux')
        .directive('menubar', function ($rootScope, $state, $translate,FunctionalityRolesService, Events) {

            var link = function ($scope) {

                // esposizione interfaccia
                //$scope.FunctionalityRolesService = FunctionalityRolesService;

                //open sidebar
                $scope.openSidebar = function () {
                    //Broadcaster.do(Events.SIDEBAR_OPEN);
                    $rootScope.$broadcast(Events.SIDEBAR_OPEN);
                };

                //set the section label
                $scope.$on('$stateChangeSuccess', function (event, toState) {
                    $scope.currentStateLabel = FunctionalityRolesService.getTitleInMenuBar(toState);
                });

            };

            return {
                templateUrl: 'common/directives/menubar.html',
                restrict: 'E',
                replace: true,
                link: link
            };
        });
})();
